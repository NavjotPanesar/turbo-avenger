<!DOCTYPE html>
<html ng-app="todoList">

    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.11/angular.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.11/angular-route.min.js"></script>
        <title>Quests // Turbo Avenger</title>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
        <link href='http://fonts.googleapis.com/css?family=Lobster' rel='stylesheet' type='text/css'>
        <link href='http://fonts.googleapis.com/css?family=News+Cycle:400,700' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="/stylesheets/style.css">
        <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
        <script>var app = angular.module('todoList', ['ngRoute']);</script>
        <script type="text/javascript" src="./controllers/questController.js"></script>
    </head>

    <body ng-controller="questController">

        <nav ng-include="'/templates/header.html'"></nav>

        <div class="container col-md-offset-2 col-md-8">

            <div class="row">

                <div class="col-sm-7">
                    <div class="qpage-card">
                        <div class="inner"><h3>Active Quests <span class="fa fa-caret-down"></span></h3></div>

                        <div class="holder" ng-repeat="q in quests">
                            <div class="challenge-entry main-challenge" data-toggle="collapse" data-target="#{{ q['_id']}}">
                                <h2 class="truncate">{{ q['title'] }}</h2>
                                <a href="#"><span class="div-link"></span></a>
                            </div>
                            <div id="{{ q['_id'] }}" class="collapse" ng-init="todos = q['todos']">
                                <div id="{{ t['_id'] }}" class="challenge-entry challenge-subtask" ng-repeat="t in todos" ng-class="{strikedown: t['completed']}">
                                    <h2 class="truncate"><span class="fa fa-square-o" ng-if="t['completed'] == false"></span><span class="fa fa-check-square-o" ng-if="t['completed'] == true"></span> {{ t['description'] }}</h2>
                                    <p class="subtext truncate"><span class="fa fa-calendar-o"></span> Feb 12 2015 • 100 <span class="fa fa-star"></span></p>
                                    <a ng-href='#here' ng-click="toggle(t['description'], q['associatedMasterList'])"><span class="div-link"></span></a>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="qpage-add">
                        <a ng-href='#here' ng-click="subscribeList()"><span class="fa fa-plus"></span><span class="desc"><strong>Subscribe to new quest</strong></span></a>
                    </div>

                </div>

                <div class="col-sm-5">
                    <div class="qpage-card">
                        <div class="inner">
                            <div class="row nopadding">
                                <div class="col-xs-10 nopadding">
                                    <h3 id="user-name" class="truncate"></h3>
                                    <p><span id="pts"></span> <span class="fa fa-star"></span> • Noob</p>
                                </div>
                                <div class="col-xs-2 nopadding">
                                    <span><img id="disp-pic" src="" class="img-circle display-pic" />
                                    <img src="/images/b7.png" class="display-badge" /></span>
                                </div>
                            </div><!-- /row -->
                        </div>
                    </div>
                </div>

                <div class="col-sm-5">
                    <div class="qpage-card">
                        <div class="inner">
                            <h3>Weekly Leaderboards <span class="fa fa-caret-down"></span></h3>

                            <div class="leaderboard">
                                <p ng-repeat="user in leaderboard">
                                    {{ user.name }} <span class="points">({{ user.points }} <span class="fa fa-star"></span>)</span>
                                </p>
                            </div>
                        </div>

                    </div>
                </div>

            </div><!-- /row -->

        </div><!-- /container -->

        <nav ng-include="'/templates/footer.html'"></nav>
    </body>

  </html>